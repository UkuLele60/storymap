<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Évolution historique du port de Ouidah</title>

  <style>
    :root {
      --benin-green: #008751;
      --benin-yellow: #fcd116;
      --benin-red: #e03c32;
      --bg-light: #FAF2E6;
      --text-dark: #222;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        Roboto, sans-serif;
      background: var(--bg-light);
      color: var(--text-dark);
      padding: 12px;
      display: flex;
      justify-content: center;
    }

    .page {
      max-width: 1200px;
      width: 100%;
    }

    h1 {
      text-align: center;
      font-size: 1.35rem;
      font-weight: 800;
      margin-bottom: 8px;
      position: relative;
    }

    h1::after {
      content: "";
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: -8px;
      width: 75%;
      height: 6px;
      border-radius: 999px;
      background: linear-gradient(
        90deg,
        var(--benin-green),
        var(--benin-yellow),
        var(--benin-red)
      );
      opacity: 0.9;
    }

    .timeline-card {
      margin-top: 16px;
      background: white;
      border-radius: 18px;
      padding: 16px 18px 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.12);
    }

    .timeline-header {
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      margin-bottom: 12px;
      flex-wrap: wrap;
    }

    .timeline-header button {
      padding: 8px 14px;
      border-radius: 999px;
      border: 1px solid #ccc;
      background: #f5f5f5;
      cursor: pointer;
      font-size: 0.9rem;
    }

    .timeline-wrapper {
      margin-top: 8px;
      position: relative;
    }

    /* ⬇️ HAUTEUR GLOBALE RÉDUITE */
    .timeline-inner {
      position: relative;
      height: 240px;
      margin-top: 10px;
    }

    /* ⬇️ LIGNE ABAISSÉE */
    .timeline-line {
      position: absolute;
      left: 4%;
      right: 4%;
      top: 75%;
      height: 3px;
      transform: translateY(-50%);
      background: linear-gradient(
        90deg,
        var(--benin-green),
        var(--benin-yellow),
        var(--benin-red)
      );
      border-radius: 999px;
    }

    /* ⬇️ ÉVÉNEMENTS CALÉS SUR LA LIGNE */
    .timeline-event {
      position: absolute;
      bottom: 25%;
      transform: translateX(-50%);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }

    .timeline-event.visible {
      opacity: 1;
      pointer-events: auto;
    }

    .event-dot {
      position: absolute;
      left: 50%;
      bottom: -6px;
      transform: translateX(-50%);
      width: 14px;
      height: 14px;
      border-radius: 50%;
      background: var(--benin-red);
      border: 3px solid white;
      cursor: pointer;
    }

    .timeline-event.highlight .event-dot {
      background: var(--benin-yellow);
      transform: translateX(-50%) scale(1.2);
    }

    .event-label {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      min-width: 140px;
      max-width: 180px;
      background: white;
      border-radius: 12px;
      padding: 8px 10px 7px 12px;
      font-size: 0.85rem;
      box-shadow: 0 3px 10px rgba(0,0,0,0.12);
      border-left: 5px solid var(--benin-green);
      cursor: pointer;
    }

    .timeline-event.highlight .event-label {
      border-color: var(--benin-red);
    }

    /* ⬆️ PLUS D’AIR AU-DESSUS */
    .event-label.top {
      transform: translate(-50%, -165px);
    }

    /* ⬇️ LABELS DU BAS ABAISSÉS */
    .event-label.bottom {
      transform: translate(-50%, 30px);
    }

    .event-year {
      font-weight: 700;
      color: var(--benin-green);
      margin-bottom: 2px;
    }

    .event-text {
      font-size: 0.83rem;
      font-weight: 500;
    }

    @media (max-width: 768px) {
      .timeline-inner { height: 200px; }
      .event-label.top { transform: translate(-50%, -95px); }
      .event-label.bottom { transform: translate(-50%, 42px); }
    }
  </style>
</head>

<body>
  <div class="page">
    <h1>Évolution historique du port de Ouidah de 1472 à 1890 (Law, 2004)</h1>

    <div class="timeline-card">
      <div class="timeline-header">
        <button id="btn-play">Lancer l'animation de la frise</button>
        <button id="btn-show-all">Afficher tous les événements</button>
      </div>

      <div class="timeline-wrapper">
        <div class="timeline-inner" id="timeline">
          <div class="timeline-line"></div>

          <!-- ⚠️ ÉVÉNEMENTS : STRICTEMENT IDENTIQUES À TON FICHIER -->
          <!-- (inchangés, conservés tels quels) -->

          <!-- … ICI TON BLOC D’ÉVÉNEMENTS COMPLET … -->
		  
		            <!-- 1472 -->
<div class="timeline-event" data-year="1472" data-side="top">
  <div class="event-dot"></div>
  <div class="event-label top">
    <div class="event-year">1472</div>
    <div class="event-text">Premières explorations portugaises dans la Baie du Bénin</div>
  </div>
</div>

<!-- 1550 -->
<div class="timeline-event" data-year="1550" data-side="bottom">
  <div class="event-dot"></div>
  <div class="event-label bottom">
    <div class="event-year">XVIᵉ siècle</div>
    <div class="event-text">Début présumé d'échanges commerciaux discontinus avec les européens à Ouidah</div>
  </div>
</div>

<!-- 1670 -->
<div class="timeline-event" data-year="1670" data-side="top">
  <div class="event-dot"></div>
  <div class="event-label top">
    <div class="event-year">1670s</div>
    <div class="event-text">Traite transatlantique d'esclaves clairement établie (probable origine antérieure)</div>
  </div>
</div>

<!-- 1680 -->
<div class="timeline-event" data-year="1680" data-side="bottom">
  <div class="event-dot"></div>
  <div class="event-label bottom">
    <div class="event-year">1680s</div>
    <div class="event-text">Le royaume du Danxomè devient le fournisseur majeur d'esclave dans la région.</div>
  </div>
</div>

<!-- 1690 -->
<div class="timeline-event" data-year="1690" data-side="top">
  <div class="event-dot"></div>
  <div class="event-label top">
    <div class="event-year">1690s</div>
    <div class="event-text">≈ 10 000 esclaves par an transitent par Ouidah.</div>
  </div>
</div>

<!-- 1727 -->
<div class="timeline-event" data-year="1727" data-side="bottom">
  <div class="event-dot"></div>
  <div class="event-label bottom">
    <div class="event-year">1727</div>
    <div class="event-text">Conquête de Hueda par le royaume du Danxomè</div>
  </div>
</div>

<!-- 1732 -->
<div class="timeline-event" data-year="1732" data-side="top">
  <div class="event-dot"></div>
  <div class="event-label top">
    <div class="event-year">1732</div>
    <div class="event-text">Destruction du port de Jakin par le Danxomè. Ouidah devient le seul port de traite de la région.</div>
  </div>
</div>

<!-- 1770 -->
<div class="timeline-event" data-year="1770" data-side="bottom">
  <div class="event-dot"></div>
  <div class="event-label bottom">
    <div class="event-year">1770s</div>
    <div class="event-text">Le Danxomè rencontrent des premières difficultés à fournir des captifs</div>
  </div>
</div>

<!-- 1790 -->
<div class="timeline-event" data-year="1790" data-side="top">
  <div class="event-dot"></div>
  <div class="event-label top">
    <div class="event-year">1790s</div>
    <div class="event-text">Marché et prix de la traite stabilisés</div>
  </div>
</div>

<!-- NOUVELLES DATES D’ABOLITION DE LA TRAITE -->

<!-- 1807 Royaume-Uni -->
<div class="timeline-event" data-year="1807" data-side="bottom">
  <div class="event-dot"></div>
  <div class="event-label bottom">
    <div class="event-year">1807</div>
    <div class="event-text">Abolition britannique de la traite</div>
  </div>
</div>

<!-- 1808 États-Unis -->
<div class="timeline-event" data-year="1808" data-side="top">
  <div class="event-dot"></div>
  <div class="event-label top">
    <div class="event-year">1808</div>
    <div class="event-text">Abolition américaine de la traite</div>
  </div>
</div>

<!-- 1815 Portugal (Nord de l’équateur) -->
<div class="timeline-event" data-year="1815" data-side="bottom">
  <div class="event-dot"></div>
  <div class="event-label bottom">
    <div class="event-year">1815</div>
    <div class="event-text">Interdiction portugaise de la traite au nord de l’équateur</div>
  </div>
</div>

<!-- 1818 France -->
<div class="timeline-event" data-year="1818" data-side="top">
  <div class="event-dot"></div>
  <div class="event-label top">
    <div class="event-year">1818</div>
    <div class="event-text">Abolition française de la traite</div>
  </div>
</div>

<!-- 1823 -->
<div class="timeline-event" data-year="1823" data-side="bottom">
  <div class="event-dot"></div>
  <div class="event-label bottom">
    <div class="event-year">1823</div>
    <div class="event-text">Guerre Dahomey-Oyo : perturbation de la traite</div>
  </div>
</div>

<!-- 1850 -->
<div class="timeline-event" data-year="1850" data-side="top">
  <div class="event-dot"></div>
  <div class="event-label top">
    <div class="event-year">~1850</div>
    <div class="event-text">Déclin de la traite</div>
  </div>
</div>

<!-- 1857 -->
<div class="timeline-event" data-year="1857" data-side="bottom">
  <div class="event-dot"></div>
  <div class="event-label bottom">
    <div class="event-year">1857</div>
    <div class="event-text">Fin de la traite illégale</div>
  </div>
</div>

<!-- 1890 -->
<div class="timeline-event" data-year="1890" data-side="top">
  <div class="event-dot"></div>
  <div class="event-label top">
    <div class="event-year">1890s</div>
    <div class="event-text">Transition post-esclavagiste</div>
  </div>
</div>

<!-- 1894 -->
<div class="timeline-event" data-year="1894" data-side="top">
  <div class="event-dot"></div>
  <div class="event-label top">
    <div class="event-year">1894</div>
    <div class="event-text">Déclin du royaume de Danxomè avec la reddition du roi Béhanzin. Début de la colonisation française
</div>
  </div>
</div>
		  

        </div>
      </div>
    </div>
  </div>

  <!-- ⚠️ JS STRICTEMENT IDENTIQUE (inchangé) -->
  <script>
    /* … ton script original, inchangé … */
	 (function () {
      const timeline = document.getElementById("timeline");
      const eventEls = Array.from(
        timeline.querySelectorAll(".timeline-event")
      );

      // Tri chronologique
      eventEls.sort((a, b) => {
        return (
          parseInt(a.dataset.year, 10) - parseInt(b.dataset.year, 10)
        );
      });

      const years = eventEls.map((el) => parseInt(el.dataset.year, 10));
      const minYear = Math.min(...years);
      const maxYear = Math.max(...years);

      // Positionner proportionnellement dans le temps
      eventEls.forEach((el) => {
        const year = parseInt(el.dataset.year, 10);
        const ratio =
          (year - minYear) / (maxYear - minYear || 1);
        const leftPercent = 4 + ratio * 92; // marges de 4% à gauche/droite
        el.style.left = leftPercent + "%";
      });

      const btnPlay = document.getElementById("btn-play");
      const btnShowAll = document.getElementById("btn-show-all");

      let currentIndex = -1;
      let playing = false;
      let timerId = null;
      const intervalMs = 3000; // rythme de lecture

      function clearHighlight() {
        eventEls.forEach((el) => el.classList.remove("highlight"));
      }

      function showUpTo(index) {
        eventEls.forEach((el, i) => {
          if (i <= index) {
            el.classList.add("visible");
          } else {
            el.classList.remove("visible");
            el.classList.remove("highlight");
          }
        });
      }

      function step() {
        if (currentIndex < eventEls.length - 1) {
          currentIndex++;
          showUpTo(currentIndex);
          clearHighlight();
          eventEls[currentIndex].classList.add("highlight");
        } else {
          stopPlaying(); // fin de l'animation
        }
      }

      function startPlaying() {
        if (playing) return;

        // Si on est déjà au bout (fin d’une animation précédente
        // ou "Afficher tous les événements"), on repart de zéro
        if (currentIndex >= eventEls.length - 1) {
          currentIndex = -1;
          eventEls.forEach((el) => {
            el.classList.remove("visible");
            el.classList.remove("highlight");
          });
        }

        playing = true;
        btnPlay.textContent = "Mettre en pause";
        step();
        timerId = setInterval(step, intervalMs);
      }

      function stopPlaying() {
        playing = false;
        btnPlay.textContent = "Lancer l'animation de la frise";
        if (timerId) {
          clearInterval(timerId);
          timerId = null;
        }
      }

      btnPlay.addEventListener("click", () => {
        if (playing) {
          stopPlaying();
        } else {
          startPlaying();
        }
      });

      btnShowAll.addEventListener("click", () => {
        stopPlaying();
        currentIndex = eventEls.length - 1;
        eventEls.forEach((el) => {
          el.classList.add("visible");
          el.classList.remove("highlight");
        });
      });

      // Cliquer sur un événement pour reprendre à partir de ce point
      eventEls.forEach((el, index) => {
        el.addEventListener("click", () => {
          stopPlaying();
          currentIndex = index - 1;
          showUpTo(index);
          clearHighlight();
          el.classList.add("highlight");
          startPlaying();
        });

        const dot = el.querySelector(".event-dot");
        const label = el.querySelector(".event-label");
        [dot, label].forEach((child) => {
          child.addEventListener("click", (e) => {
            e.stopPropagation();
            el.click();
          });
        });
      });

      // Au chargement : frise vide (aucun événement visible)
      eventEls.forEach((el) => {
        el.classList.remove("visible");
        el.classList.remove("highlight");
      });
      currentIndex = -1;
    })();
	
  </script>
</body>
</html>
